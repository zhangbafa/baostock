# A股数据获取命令行工具使用说明

## 简介

这是一个基于Python和baostock库开发的A股数据获取命令行工具，支持K线数据、实时行情、财务数据等多种功能。

## 安装依赖

```bash
pip install baostock pandas click rich
```

## 基本用法

### K线数据查询

```bash
python stock.py kline [股票代码] [选项]
```

#### 参数说明

- `股票代码`: 必需，支持以下格式：
  - 完整格式: sz.000001 (深交所) / sh.600000 (上交所)
  - 简写格式: 000001 (0/3开头自动识别为深交所) / 600000 (6开头自动识别为上交所)

#### 选项

- `-s, --start`: 开始日期，格式为YYYY-MM-DD，如2023-01-01
- `-e, --end`: 结束日期，格式为YYYY-MM-DD，如2023-12-31
- `-d, --days`: 获取最近N天数据，默认为30天
- `-f, --frequency`: K线周期，支持以下值：
  - `5m`: 5分钟线
  - `15m`: 15分钟线
  - `30m`: 30分钟线
  - `60m`: 60分钟线
  - `d`: 日线（默认）
  - `w`: 周线
  - `M`: 月线
- `--export`: 导出数据到CSV文件

## K线周期（-f）参数详解

`-f` 参数用于指定K线的周期类型，不同的周期类型会返回不同的数据粒度：

### 日线数据 (`-f d`)

日线数据是默认的数据类型，每个交易日生成一条记录。

```bash
python stock.py kline sh.600000 -f d
```

### 周线数据 (`-f w`)

周线数据按周汇总，每周生成一条记录。

```bash
python stock.py kline sh.600000 -f w
```

### 月线数据 (`-f M`)

月线数据按月汇总，每月生成一条记录。

```bash
python stock.py kline sh.600000 -f M
```

### 分钟线数据 (`-f 5m`, `-f 15m`, `-f 30m`, `-f 60m`)

分钟线数据提供更细粒度的交易信息，支持5分钟、15分钟、30分钟和60分钟周期。

```bash
python stock.py kline sh.600000 -f 5m  # 5分钟线
python stock.py kline sh.600000 -f 15m # 15分钟线
python stock.py kline sh.600000 -f 30m # 30分钟线
python stock.py kline sh.600000 -f 60m # 60分钟线
```

## 数据统计说明

工具会根据不同的K线周期类型，显示相应的统计信息：

- 日线数据：显示"总交易日: X 天"
- 周线数据：显示"总交易周: X 周"
- 月线数据：显示"总交易月: X 月"
- 分钟线数据：显示"总交易日: X 天 (Y 个Nm周期)"，其中X是实际的交易天数，Y是总的K线数量，N是分钟周期（5/15/30/60）

## 其他功能

### 股票基本信息查询

```bash
python stock.py info [股票代码]
```

### 财务数据查询

```bash
python stock.py finance [股票代码] [-y 年份] [-q 季度]
```

### 指数成分股查询

```bash
python stock.py index -i [指数类型] [--export 导出文件]
```

指数类型可选：sz50（上证50）、hs300（沪深300）、zz500（中证500）

### 批量统计

```bash
python stock.py batch [--config 配置文件] [-d 天数]
```

## 示例

```bash
# 获取浦发银行最近30天日线数据
python stock.py kline sh.600000

# 获取浦发银行周线数据
python stock.py kline sh.600000 -f w

# 获取浦发银行2023年全年日线数据
python stock.py kline sh.600000 -s 2023-01-01 -e 2023-12-31

# 获取浦发银行最近60天5分钟线数据
python stock.py kline sh.600000 -d 60 -f 5m

# 导出数据到CSV文件
python stock.py kline sh.600000 -d 90 --export 浦发银行.csv
```

## 注意事项

- 数据来源：baostock（免费、稳定的A股数据接口）
- 更新频率：日线数据T+1更新，财务数据按季度更新
- 网络要求：需要稳定的网络连接获取实时数据